<div class="track-list-container">
  <!-- Header -->
  <div class="header">
    <h1>Motorcycle Tracks</h1>
    <p>Find and rank motorcycle tracks across the USA</p>
  </div>

  <!-- Contact Button -->
  <div class="contact-section">
    <button class="contact-btn" (click)="openContactModal()">
      <span>✉</span> Contact Us
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading tracks...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="loadTracks()" class="retry-btn">Try Again</button>
  </div>

  <!-- Filters and Content -->
  <div *ngIf="!loading && !error" class="content">
    <!-- Filters Section -->
    <div class="filters-section">
      <div class="filters-grid">
        <!-- Search -->
        <div class="filter-group">
          <label for="search">Search Tracks</label>
          <input 
            id="search"
            type="text" 
            [(ngModel)]="searchTerm" 
            (ngModelChange)="onSearchChange()"
            placeholder="Search by name, city, or state..."
            class="search-input"
          >
        </div>

        <!-- State Filter -->
        <div class="filter-group">
          <label for="state">State</label>
          <select 
            id="state"
            [(ngModel)]="selectedState" 
            (ngModelChange)="onStateChange()"
            class="select-input"
          >
            <option value="">All States</option>
            <option *ngFor="let state of states" [value]="state">{{ state }}</option>
          </select>
        </div>

        <!-- Difficulty Range -->
        <div class="filter-group">
          <label>Difficulty Range</label>
          <div class="range-inputs">
            <input 
              type="number" 
              [(ngModel)]="difficultyRange.min" 
              (ngModelChange)="onDifficultyChange()"
              min="0" 
              max="10" 
              class="range-input"
            >
            <span>to</span>
            <input 
              type="number" 
              [(ngModel)]="difficultyRange.max" 
              (ngModelChange)="onDifficultyChange()"
              min="0" 
              max="10" 
              class="range-input"
            >
          </div>
        </div>

        <!-- Sort -->
        <div class="filter-group">
          <label for="sort">Sort By</label>
          <div class="sort-controls">
            <select 
              id="sort"
              [(ngModel)]="sortBy" 
              (ngModelChange)="onSortChange()"
              class="select-input"
            >
              <option value="name">Name</option>
              <option value="state">State</option>
              <option value="difficulty">Difficulty</option>
              <option value="reviews">Number of Reviews</option>
            </select>
            <button 
              (click)="toggleSortOrder()" 
              class="sort-btn"
              [class.asc]="sortOrder === 'asc'"
              [class.desc]="sortOrder === 'desc'"
            >
              {{ sortOrder === 'asc' ? '↑' : '↓' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Clear Filters -->
      <button (click)="clearFilters()" class="clear-filters-btn">
        Clear All Filters
      </button>
    </div>

    <!-- Results Count -->
    <div class="results-info">
      <p>Showing {{ filteredTracks.length }} of {{ tracks.length }} tracks</p>
    </div>

    <!-- Tracks Grid -->
    <div class="tracks-grid">
      <app-track-card 
        *ngFor="let track of filteredTracks" 
        [track]="track"
        class="track-card"
      ></app-track-card>
    </div>

    <!-- No Results -->
    <div *ngIf="filteredTracks.length === 0" class="no-results">
      <p>No tracks found matching your criteria.</p>
      <button (click)="clearFilters()" class="clear-filters-btn">
        Clear Filters
      </button>
    </div>
  </div>
</div>

<!-- Contact Modal -->
<app-contact-modal 
  *ngIf="showContactModal" 
  (closeModal)="closeContactModal()"
  (showSnackbar)="onShowSnackbar($event)">
</app-contact-modal>

<!-- Snackbar -->
<div *ngIf="showSnackbar" class="snackbar">
  {{ snackbarMessage }}
</div>
